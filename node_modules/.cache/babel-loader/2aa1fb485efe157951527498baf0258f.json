{"remainingRequest":"c:\\xampp\\htdocs\\zhanglihuan\\shangkebiji\\VUEUI\\iphone\\app\\node_modules\\babel-loader\\lib\\index.js!c:\\xampp\\htdocs\\zhanglihuan\\shangkebiji\\VUEUI\\iphone\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\xampp\\htdocs\\zhanglihuan\\shangkebiji\\VUEUI\\iphone\\app\\node_modules\\vue-video\\video.vue?vue&type=script&lang=js","dependencies":[{"path":"c:\\xampp\\htdocs\\zhanglihuan\\shangkebiji\\VUEUI\\iphone\\app\\node_modules\\vue-video\\video.vue","mtime":1500016675000},{"path":"c:\\xampp\\htdocs\\zhanglihuan\\shangkebiji\\VUEUI\\iphone\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853417988},{"path":"c:\\xampp\\htdocs\\zhanglihuan\\shangkebiji\\VUEUI\\iphone\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"c:\\xampp\\htdocs\\zhanglihuan\\shangkebiji\\VUEUI\\iphone\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar getMousePosition = function getMousePosition(e) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'x';\n\n  if (type === 'x') {\n    return e.pageX;\n  }\n\n  return e.pageY;\n};\n\nvar pad = function pad(val) {\n  val = Math.floor(val);\n\n  if (val < 10) {\n    return '0' + val;\n  }\n\n  return val + '';\n};\n\nvar timeParse = function timeParse(sec) {\n  var min = 0;\n  min = Math.floor(sec / 60);\n  sec = sec - min * 60;\n  return pad(min) + ':' + pad(sec);\n};\n\nexport default {\n  props: {\n    sources: Array,\n    options: {\n      type: Object,\n      default: function _default() {\n        return {\n          autoplay: false,\n          volume: 0.9,\n          poster: ''\n        };\n      }\n    }\n  },\n  data: function data() {\n    return {\n      $video: null,\n      video: {\n        $videoSlider: null,\n        len: 0,\n        current: 0,\n        loaded: 0,\n        moving: false,\n        displayTime: '00:00',\n        pos: {\n          start: 0,\n          width: 0,\n          innerWidth: 0,\n          current: 0\n        }\n      },\n      volume: {\n        $volBox: null,\n        muted: false,\n        percent: 60,\n        moving: false,\n        pos: {\n          start: 0,\n          width: 0,\n          innerWidth: 0,\n          current: 0\n        }\n      },\n      player: {\n        $player: null,\n        pos: null\n      },\n      tmp: {\n        contrlHideTimer: null\n      },\n      state: {\n        contrlShow: true,\n        vol: 0.5,\n        currentTime: 0,\n        fullScreen: false,\n        playing: false\n      }\n    };\n  },\n  ready: function ready() {\n    this.init();\n  },\n  mounted: function mounted() {\n    this.init();\n  },\n  beforeDestroy: function beforeDestroy() {\n    document.body.removeEventListener('mousemove', this.mouseMoveAction);\n    document.body.removeEventListener('mouseup', this.mouseUpAction);\n  },\n  methods: {\n    init: function init() {\n      this.$video = this.$el.getElementsByTagName('video')[0];\n      this.initCore();\n\n      if (this.options.autoplay) {\n        this.play();\n      }\n\n      document.body.addEventListener('mousemove', this.mouseMoveAction, false);\n      document.body.addEventListener('mouseup', this.mouseUpAction, false);\n    },\n    initCore: function initCore() {\n      this.initVol();\n      this.initVideo();\n      this.initPlayer();\n      var vol = this.options.volume || 0.9;\n      this.setVol(vol);\n    },\n    initPlayer: function initPlayer() {\n      var $player = this.$el.getElementsByClassName('__cov-video-container')[0];\n      this.player.pos = $player.getBoundingClientRect();\n      this.player.$player = $player;\n    },\n    initVol: function initVol() {\n      var $volBox = this.$el.getElementsByClassName('__cov-contrl-vol-slider')[0];\n      var $volInner = $volBox.getElementsByClassName('__cov-contrl-vol-inner')[0];\n      this.volume.$volBox = $volBox;\n      this.volume.pos.innerWidth = $volInner.getBoundingClientRect().width;\n      this.volume.pos.start = $volBox.getBoundingClientRect().left;\n      this.volume.pos.width = $volBox.getBoundingClientRect().width - this.volume.pos.innerWidth;\n    },\n    initVideo: function initVideo() {\n      var $videoSlider = this.$el.getElementsByClassName('__cov-contrl-video-slider')[0];\n      var $videoInner = $videoSlider.getElementsByClassName('__cov-contrl-video-inner')[0];\n      this.$videoSlider = $videoSlider;\n      this.video.pos.start = $videoSlider.getBoundingClientRect().left;\n      this.video.pos.innerWidth = $videoInner.getBoundingClientRect().width;\n      this.video.pos.width = $videoSlider.getBoundingClientRect().width - this.video.pos.innerWidth;\n      this.getTime();\n    },\n    mouseEnterVideo: function mouseEnterVideo() {\n      if (this.tmp.contrlHideTimer) {\n        clearTimeout(this.tmp.contrlHideTimer);\n        this.tmp.contrlHideTimer = null;\n      }\n\n      this.state.contrlShow = true;\n    },\n    mouseLeaveVideo: function mouseLeaveVideo(e) {\n      var _this = this;\n\n      if (this.tmp.contrlHideTimer) {\n        clearTimeout(this.tmp.contrlHideTimer);\n      }\n\n      this.tmp.contrlHideTimer = setTimeout(function () {\n        _this.state.contrlShow = false;\n        _this.tmp.contrlHideTimer = null;\n      }, 2000);\n    },\n    toggleContrlShow: function toggleContrlShow() {\n      this.state.contrlShow = !this.state.contrlShow;\n    },\n    getTime: function getTime() {\n      var _this2 = this;\n\n      this.$video.addEventListener('durationchange', function (e) {\n        console.log(e);\n      });\n      this.$video.addEventListener('progress', function (e) {\n        _this2.video.loaded = (-1 + _this2.$video.buffered.end(0) / _this2.$video.duration) * 100;\n      });\n      this.video.len = this.$video.duration;\n    },\n    setVideoByTime: function setVideoByTime(percent) {\n      this.$video.currentTime = Math.floor(percent * this.video.len);\n    },\n    play: function play() {\n      var _this3 = this;\n\n      this.state.playing = !this.state.playing;\n\n      if (this.$video) {\n        if (this.state.playing) {\n          this.$video.play();\n          this.mouseLeaveVideo();\n          this.$video.addEventListener('timeupdate', this.timeline);\n          this.$video.addEventListener('ended', function (e) {\n            _this3.state.playing = false;\n            _this3.video.pos.current = 0;\n            _this3.$video.currentTime = 0;\n          });\n        } else {\n          this.$video.pause();\n        }\n      }\n    },\n    timeline: function timeline() {\n      var percent = this.$video.currentTime / this.$video.duration;\n      this.video.pos.current = (this.video.pos.width * percent).toFixed(3);\n      this.video.displayTime = timeParse(this.$video.duration - this.$video.currentTime);\n    },\n    volMove: function volMove(e) {\n      this.initVol();\n      this.volume.moving = true;\n    },\n    videoMove: function videoMove(e) {\n      this.initVideo();\n      this.video.moving = true;\n    },\n    slideClick: function slideClick(e) {\n      this.videoSlideMove(e);\n    },\n    volSlideClick: function volSlideClick(e) {\n      this.volSlideMove(e);\n    },\n    volMuted: function volMuted() {\n      this.$video.muted = !this.$video.muted;\n      this.volume.muted = this.$video.muted;\n    },\n    setVol: function setVol(val) {\n      if (this.$video) {\n        this.volume.pos.current = val * this.volume.pos.width;\n        this.volume.percent = val * 100;\n        this.$video.volume = val;\n      }\n    },\n    fullScreen: function fullScreen() {\n      if (!this.state.fullScreen) {\n        this.state.fullScreen = true;\n        this.$video.webkitRequestFullScreen();\n      } else {\n        this.state.fullScreen = false;\n        document.webkitCancelFullScreen();\n      }\n\n      setTimeout(this.initVideo, 200);\n    },\n    mouseMoveAction: function mouseMoveAction(e) {\n      if (this.volume.moving) {\n        this.volSlideMove(e);\n      }\n\n      if (this.video.moving) {\n        this.videoSlideMove(e);\n      }\n\n      this.contrlHider(e);\n    },\n    contrlHider: function contrlHider(e) {\n      var x = getMousePosition(e, 'x');\n      var y = getMousePosition(e, 'y');\n      if (!this.player.pos) return;\n\n      if (x > this.player.pos.left && x < this.player.pos.left + this.player.pos.width) {\n        if (y > this.player.pos.top + this.player.pos.height * 0.6 && y < this.player.pos.top + this.player.pos.height) {\n          return this.mouseEnterVideo();\n        }\n      }\n\n      return this.mouseLeaveVideo();\n    },\n    volSlideMove: function volSlideMove(e) {\n      var x = getMousePosition(e) - this.volume.pos.start;\n\n      if (x > 0 && x < this.volume.pos.width) {\n        this.setVol(x / this.volume.pos.width);\n      }\n    },\n    videoSlideMove: function videoSlideMove(e) {\n      var x = getMousePosition(e) - this.video.pos.start;\n\n      if (x > 0 && x < this.video.pos.width) {\n        this.video.pos.current = x;\n        this.setVideoByTime(x / this.video.pos.width);\n      }\n    },\n    mouseUpAction: function mouseUpAction(e) {\n      this.volume.moving = false;\n      this.video.moving = false;\n    }\n  }\n};",{"version":3,"sources":["video.vue"],"names":[],"mappings":"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","sourcesContent":["<style>\n.__cov-video-container {\n    position: relative;\n    width: 100%;\n    background-color: #000;\n}\n\n.__cov-video {\n    width: 100%;\n    height: 100%;\n    vertical-align: bottom;\n}\n\n.__cov-contrl-content {\n    position: absolute;\n    display: flex;\n    left: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.41);\n    height: 2rem;\n    width: 100%;\n    z-index: 2147483647;\n}\n.__cov-contrl-play-btn {\n    position: relative;\n    height: 100%;\n    background: none;\n    border: none;\n    height: 2rem;\n    width: 4rem;\n    outline: none;\n    vertical-align: top;\n}\n.__cov-contrl-play-btn:hover {\n    background-color: rgba(255, 255, 255, 0.27);\n}\n.__cov-contrl-play-btn-icon {\n    position: absolute;\n    height: 1rem;\n    width: 1rem;\n    top: 50%;\n    left: 50%;\n    margin-top: -.5rem;\n    margin-left: -.5rem;\n}\n.__cov-contrl-vol-btn-icon {\n    position: absolute;\n    height: 1.1rem;\n    width: 1.1rem;\n    top: 50%;\n    left: 50%;\n    margin-top: -.55rem;\n    margin-left: -.55rem;\n}\n.__cov-contrl-vol-slider {\n    position: relative;\n    display: inline-block;\n    height: 100%;\n    width: 6rem;\n    height: 2rem;\n    overflow: hidden;\n    transition: all .2s ease-in;\n}\n.__cov-contrl-vol-rail {\n    position: absolute;\n    top: 50%;\n    width: 6rem;\n    height: .1rem;\n    margin-top: -.05rem;\n    background: #fff;\n}\n.__cov-contrl-vol-inner {\n    position: absolute;\n    display: inline-block;\n    left: 0;\n    top: 50%;\n    background: #fff;\n    width: .5rem;\n    height: .5rem;\n    border-radius: 50%;\n    margin-top: -.25rem;\n    z-index: 2;\n    cursor: pointer;\n}\n.__cov-contrl-vol-box {\n    display: flex;\n}\n.__cov-contrl-video-slider {\n    position: relative;\n    display: inline-block;\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n    margin: 0 .5rem;\n    transition: all .2s ease-in;\n}\n.__cov-contrl-video-rail {\n    position: absolute;\n    top: 50%;\n    width: 100%;\n    height: .1rem;\n    margin-top: -.05rem;\n    background: rgba(255, 255, 255, 0.5);\n    overflow: hidden;\n}\n.__cov-contrl-video-rail-inner {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: .1rem;\n    background: rgb(255, 255, 255);\n    transition: transform .2s;\n}\n.__cov-contrl-video-inner {\n    position: absolute;\n    display: inline-block;\n    left: 0;\n    top: 50%;\n    background: #fff;\n    width: .5rem;\n    height: .5rem;\n    border-radius: 50%;\n    margin-top: -.25rem;\n    z-index: 2;\n    cursor: pointer;\n    transition: all 16ms;\n}\n.__cov-contrl-video-time {\n    padding: 0 1rem;\n}\n.__cov-contrl-video-time-text {\n    color: #fff;\n    line-height: 2rem;\n    font-size: .8rem;\n}\n::-webkit-media-controls {\n  display:none !important;\n}\nvideo::-webkit-media-controls {\n  display:none !important;\n}\nvideo::-webkit-media-controls-enclosure {\n  display:none !important;\n}\n.fade-transition {\n    transition: opacity .3s ease;\n}\n.fade-enter{\n    opacity: 1;\n}\n.fade-leave {\n    opacity: 0;\n}\n.hide-cursor {\n    cursor: none;\n}\n@media all and (max-width: 768px) {\n    .__cov-contrl-vol-slider {\n        width: 3rem;\n    }\n    .__cov-contrl-video-time {\n        padding: 0 .2rem;\n    }\n    .__cov-contrl-vol-box .__cov-contrl-play-btn {\n        width: 2rem;\n    }\n}\n</style>\n<template>\n    <div id=\"app\">\n        <div class=\"container\">\n            <div class=\"__cov-video-container\" @mouseenter=\"mouseEnterVideo\" @mouseleave=\"mouseLeaveVideo\">\n                <video :class=\"{ 'hide-cursor': !state.contrlShow }\" class=\"__cov-video\" :poster=\"options.poster\">\n                    <source v-for=\"source in sources\" :src=\"source.src\" :type=\"source.type\">\n                    </source>\n                </video>\n                <div class=\"__cov-contrl-content\" transition=\"fade\" v-show=\"state.contrlShow\">\n                    <button class=\"__cov-contrl-play-btn\" @click=\"play\">\n                        <svg class=\"__cov-contrl-play-btn-icon\" v-show=\"!state.playing\" viewBox=\"0 0 47 57\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch -->\n                            <title>Triangle 1</title>\n                            <desc>Created with Sketch.</desc>\n                            <defs></defs>\n                            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                                <polygon id=\"Triangle-1\" stroke=\"#FFFFFF\" fill=\"#FFFFFF\" points=\"1 56 1 1 47 28.5\"></polygon>\n                            </g>\n                        </svg>\n                        <svg class=\"__cov-contrl-play-btn-icon\" v-show=\"state.playing\" viewBox=\"0 0 15 22\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch -->\n                            <title>Combined Shape</title>\n                            <desc>Created with Sketch.</desc>\n                            <defs>\n                                <path d=\"M0,0.979149244 L5,0.979149244 L5,22 L0,22 L0,0.979149244 Z M10,0.979149244 L15,0.979149244 L15,22 L10,22 L10,0.979149244 Z\" id=\"path-1\"></path>\n                                <mask id=\"mask-2\" maskContentUnits=\"userSpaceOnUse\" maskUnits=\"objectBoundingBox\" x=\"0\" y=\"0\" width=\"15\" height=\"21.0208508\" fill=\"white\">\n                                    <use xlink:href=\"#path-1\"></use>\n                                </mask>\n                            </defs>\n                            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                                <use id=\"Combined-Shape\" stroke=\"#FFFFFF\" mask=\"url(#mask-2)\" stroke-width=\"2\" fill=\"#FFFFFF\" xlink:href=\"#path-1\"></use>\n                            </g>\n                        </svg>\n                    </button>\n                    <div class=\"__cov-contrl-video-slider\" @click=\"slideClick\" @mousedown=\"videoMove\">\n                        <div class=\"__cov-contrl-video-inner\" :style=\"{ 'transform': `translate3d(${video.pos.current}px, 0, 0)`}\"></div>\n                        <div class=\"__cov-contrl-video-rail\">\n                            <div class=\"__cov-contrl-video-rail-inner\" :style=\"{ 'transform': 'translate3d(' +video.loaded + '%, 0, 0)'}\"></div>\n                        </div>\n                    </div>\n                    <div class=\"__cov-contrl-video-time\">\n                        <span class=\"__cov-contrl-video-time-text\">{{video.displayTime}}</span>\n                    </div>\n                    <div class=\"__cov-contrl-vol-box\">\n                    <button class=\"__cov-contrl-play-btn\" @click=\"volMuted\">\n                        <svg class=\"__cov-contrl-vol-btn-icon\" viewBox=\"0 0 41 44\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n                                <!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch -->\n                                <title>vol</title>\n                                <desc>Created with Sketch.</desc>\n                                <defs>\n                                    <path d=\"M8.61522369,12 L20,0.615223689 L20,37.3847763 L8.61522369,26 L1.99201702,26 C0.891856397,26 0,25.1029399 0,23.9941413 L0,14.0058587 C0,12.8980535 0.900176167,12 1.99201702,12 L8.61522369,12 L8.61522369,12 Z\" id=\"cov-vol\"></path>\n                                </defs>\n                                <g id=\"Page-1\" stroke=\"none\" stroke-width=\"2\" fill=\"none\" fill-rule=\"evenodd\">\n                                    <g id=\"vol\" transform=\"translate(2.000000, 3.000000)\">\n                                        <g id=\"cov-vol-icon\">\n                                            <g id=\"Combined-Shape-Clipped\">\n                                                <path v-show=\"volume.percent > 1 && !volume.muted\" d=\"M25,29.5538997 C28.4589093,27.6757536 31.2629093,23.2984641 31.2629093,19.7769499 C31.2629093,16.2554357 28.4589093,11.8781461 25,10\" id=\"vol-range-2\" stroke=\"#FFFFFF\"></path>\n                                                <path v-show=\"volume.percent > 70 && !volume.muted\" d=\"M28,35.5538997 C33.5816016,32.5231573 38.1063837,25.4595762 38.1063837,19.7769499 C38.1063837,14.0943235 33.5816016,7.03074247 28,4\" id=\"vol-range-2\" stroke=\"#FFFFFF\"></path>\n                                                <mask id=\"mask-2\" fill=\"white\">\n                                                    <use xlink:href=\"#cov-vol\"></use>\n                                                </mask>\n                                                <use id=\"vol-path\" stroke=\"#FFFFFF\" stroke-width=\"3\" xlink:href=\"#cov-vol\"></use>\n                                                <g id=\"Combined-Shape\" mask=\"url(#mask-2)\" stroke=\"#FFFFFF\" stroke-width=\"2\" fill=\"#FFFFFF\">\n                                                    <path d=\"M8.61522369,12 L20,0.615223689 L20,37.3847763 L8.61522369,26 L1.99201702,26 C0.891856397,26 0,25.1029399 0,23.9941413 L0,14.0058587 C0,12.8980535 0.900176167,12 1.99201702,12 L8.61522369,12 L8.61522369,12 Z\" id=\"cov-vol\"></path>\n                                                </g>\n                                            </g>\n                                        </g>\n                                    </g>\n                                </g>\n                            </svg>\n                        </button>\n                        <div class=\"__cov-contrl-vol-slider\" @click=\"volSlideClick\" @mousedown=\"volMove\">\n                            <div class=\"__cov-contrl-vol-inner\" :style=\"{ 'transform': `translate3d(${volume.pos.current}px, 0, 0)`}\"></div>\n                            <div class=\"__cov-contrl-vol-rail\"></div>\n                        </div>\n                    </div>\n                    <button class=\"__cov-contrl-play-btn\" @click=\"fullScreen\">\n                        <svg class=\"__cov-contrl-vol-btn-icon\" viewBox=\"0 0 33 33\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n                            <!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch -->\n                            <defs></defs>\n                            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                                <path d=\"M31.1682064,22 L31.1682064,31.0073537 L22,31.0073537 M22,1 L31.0073537,1 L31.0073537,10.1682064 M1,10.0073537 L1,1 L10.1682064,1 M10.0073537,31.1682064 L1,31.1682064 L1,22\" id=\"Combined-Shape\" stroke=\"#FFFFFF\" stroke-width=\"2\"></path>\n                            </g>\n                        </svg>\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nconst getMousePosition = function (e, type = 'x') {\n    if (type === 'x') {\n        return e.pageX\n    }\n    return e.pageY\n}\nconst pad = (val) => {\n    val = Math.floor(val)\n    if (val < 10) {\n        return '0' + val\n    }\n    return val + ''\n}\nconst timeParse = (sec) => {\n    let min = 0\n    min = Math.floor(sec / 60)\n    sec = sec - min * 60\n    return pad(min) + ':' + pad(sec)\n}\nexport default {\n    props: {\n        sources: Array,\n        options: {\n            type: Object,\n            default () {\n                return {\n                    autoplay: false,\n                    volume: 0.9,\n                    poster: ''\n                }\n            }\n        }\n    },\n    data () {\n        return {\n            $video: null,\n            video: {\n                $videoSlider: null,\n                len: 0,\n                current: 0,\n                loaded: 0,\n                moving: false,\n                displayTime: '00:00',\n                pos: {\n                    start: 0,\n                    width: 0,\n                    innerWidth: 0,\n                    current: 0\n                }\n            },\n            volume: {\n                $volBox: null,\n                muted: false,\n                percent: 60,\n                moving: false,\n                pos: {\n                    start: 0,\n                    width: 0,\n                    innerWidth: 0,\n                    current: 0\n                }\n            },\n            player: {\n                $player: null,\n                pos: null\n            },\n            tmp: {\n                contrlHideTimer: null\n            },\n            state: {\n                contrlShow: true,\n                vol: 0.5,\n                currentTime: 0,\n                fullScreen: false,\n                playing: false\n            }\n        }\n    },\n    ready () {\n        this.init()\n    },\n    mounted () {\n        this.init()\n    },\n    beforeDestroy () {\n        document.body.removeEventListener('mousemove', this.mouseMoveAction)\n        document.body.removeEventListener('mouseup', this.mouseUpAction)\n    },\n    methods: {\n        init () {\n            this.$video = this.$el.getElementsByTagName('video')[0]\n            this.initCore()\n            if (this.options.autoplay) {\n                this.play()\n            }\n            document.body.addEventListener('mousemove', this.mouseMoveAction, false)\n            document.body.addEventListener('mouseup', this.mouseUpAction, false)\n        },\n        initCore () {\n            this.initVol()\n            this.initVideo()\n            this.initPlayer()\n            const vol = this.options.volume || 0.9\n            this.setVol(vol)\n        },\n        initPlayer () {\n            const $player = this.$el.getElementsByClassName('__cov-video-container')[0]\n            this.player.pos = $player.getBoundingClientRect()\n            this.player.$player = $player\n        },\n        initVol () {\n            const $volBox = this.$el.getElementsByClassName('__cov-contrl-vol-slider')[0]\n            const $volInner = $volBox.getElementsByClassName('__cov-contrl-vol-inner')[0]\n            this.volume.$volBox = $volBox\n            this.volume.pos.innerWidth = $volInner.getBoundingClientRect().width\n            this.volume.pos.start = $volBox.getBoundingClientRect().left\n            this.volume.pos.width = $volBox.getBoundingClientRect().width - this.volume.pos.innerWidth\n        },\n        initVideo () {\n            const $videoSlider = this.$el.getElementsByClassName('__cov-contrl-video-slider')[0]\n            const $videoInner = $videoSlider.getElementsByClassName('__cov-contrl-video-inner')[0]\n            this.$videoSlider = $videoSlider\n            this.video.pos.start = $videoSlider.getBoundingClientRect().left\n            this.video.pos.innerWidth = $videoInner.getBoundingClientRect().width\n            this.video.pos.width = $videoSlider.getBoundingClientRect().width - this.video.pos.innerWidth\n            this.getTime()\n        },\n        mouseEnterVideo () {\n            if (this.tmp.contrlHideTimer) {\n                clearTimeout(this.tmp.contrlHideTimer)\n                this.tmp.contrlHideTimer = null\n            }\n            this.state.contrlShow = true\n        },\n        mouseLeaveVideo (e) {\n            if (this.tmp.contrlHideTimer) {\n                clearTimeout(this.tmp.contrlHideTimer)\n            }\n            this.tmp.contrlHideTimer = setTimeout(() => {\n                this.state.contrlShow = false\n                this.tmp.contrlHideTimer = null\n            }, 2000)\n        },\n        toggleContrlShow () {\n            this.state.contrlShow = !this.state.contrlShow\n        },\n        getTime () {\n            this.$video.addEventListener('durationchange', (e) => {\n                console.log(e)\n            })\n            this.$video.addEventListener('progress', (e) => {\n                this.video.loaded = (-1 + (this.$video.buffered.end(0) / this.$video.duration)) * 100\n            })\n            this.video.len = this.$video.duration\n        },\n        setVideoByTime (percent) {\n            this.$video.currentTime = Math.floor(percent * this.video.len)\n        },\n        play () {\n            this.state.playing = !this.state.playing\n            if (this.$video) {\n                if (this.state.playing) {\n                    this.$video.play()\n                    this.mouseLeaveVideo()\n                    this.$video.addEventListener('timeupdate', this.timeline)\n                    this.$video.addEventListener('ended', (e) => {\n                        this.state.playing = false\n                        this.video.pos.current = 0\n                        this.$video.currentTime = 0\n                    })\n                } else {\n                    this.$video.pause()\n                }\n            }\n        },\n        timeline () {\n            const percent = this.$video.currentTime / this.$video.duration\n            this.video.pos.current = (this.video.pos.width * percent).toFixed(3)\n            this.video.displayTime = timeParse(this.$video.duration - this.$video.currentTime)\n        },\n        volMove (e) {\n            this.initVol()\n            this.volume.moving = true\n        },\n        videoMove (e) {\n            this.initVideo()\n            this.video.moving = true\n        },\n        slideClick (e) {\n            this.videoSlideMove(e)\n        },\n        volSlideClick (e) {\n            this.volSlideMove(e)\n        },\n        volMuted () {\n            this.$video.muted = !this.$video.muted\n            this.volume.muted = this.$video.muted\n        },\n        setVol (val) {\n            if (this.$video) {\n                this.volume.pos.current = val * this.volume.pos.width\n                this.volume.percent = val * 100\n                this.$video.volume = val\n            }\n        },\n        fullScreen () {\n            if (!this.state.fullScreen) {\n                this.state.fullScreen = true\n                this.$video.webkitRequestFullScreen()\n            } else {\n                this.state.fullScreen = false\n                document.webkitCancelFullScreen()\n            }\n            setTimeout(this.initVideo, 200)\n        },\n        mouseMoveAction (e) {\n            if (this.volume.moving) {\n                this.volSlideMove(e)\n            }\n            if (this.video.moving) {\n                this.videoSlideMove(e)\n            }\n            this.contrlHider(e)\n        },\n        contrlHider (e) {\n            const x = getMousePosition(e, 'x')\n            const y = getMousePosition(e, 'y')\n            if (!this.player.pos) return\n            if (x > this.player.pos.left &&\n                x < this.player.pos.left + this.player.pos.width\n            ) {\n                if (\n                    y > this.player.pos.top + this.player.pos.height * 0.6 &&\n                    y < this.player.pos.top + this.player.pos.height\n                ) {\n                    return this.mouseEnterVideo()\n                }\n            }\n            return this.mouseLeaveVideo()\n        },\n        volSlideMove (e) {\n            const x = getMousePosition(e) - this.volume.pos.start\n            if (x > 0 && x < this.volume.pos.width) {\n                this.setVol(x / this.volume.pos.width)\n            }\n        },\n        videoSlideMove (e) {\n            const x = getMousePosition(e) - this.video.pos.start\n            if (x > 0 && x < this.video.pos.width) {\n                this.video.pos.current = x\n                this.setVideoByTime(x / this.video.pos.width)\n            }\n        },\n        mouseUpAction (e) {\n            this.volume.moving = false\n            this.video.moving = false\n        }\n    }\n}\n</script>\n"],"sourceRoot":"node_modules\\vue-video"}]}